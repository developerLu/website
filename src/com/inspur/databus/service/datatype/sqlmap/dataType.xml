<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="dataType">
	<!-- 添加新的数据上传记录 -->
	<insert id="add" parameterClass="map">
		INSERT INTO DATA_TYPE (TOPIC_CODE, TOPIC_NAME, CLISTER_NAME, BROKER_ADDR, WRITE_QUEUE_NUMS, READ_QUEUE_NUMS, PERM, 
			TAGS, KEY_COLUMN, IS_INIT, INIT_TIME, STOP_TIME, UPDATE_TIME)
		VALUES (#TOPIC_CODE#, #TOPIC_NAME#, #CLISTER_NAME#, #BROKER_ADDR#, #WRITE_QUEUE_NUMS#, #READ_QUEUE_NUMS#, #PERM#, 
			#TAGS#, #KEY_COLUMN#, #IS_INIT#, #INIT_TIME#, #STOP_TIME#, #UPDATE_TIME#)
	</insert>
	<update id="update" parameterClass="map">
		UPDATE DATA_TYPE  
			SET TOPIC_CODE=#TOPIC_CODE#,
			 IS_INIT=#IS_INIT#,
			 TOPIC_NAME=#TOPIC_NAME#,
			 CLISTER_NAME=#CLISTER_NAME#,
			 BROKER_ADDR=#BROKER_ADDR#,
			 WRITE_QUEUE_NUMS=#WRITE_QUEUE_NUMS#,
			 READ_QUEUE_NUMS=#READ_QUEUE_NUMS#,
			 PERM=#PERM#,
			 TAGS=#TAGS#,
			 KEY_COLUMN=#KEY_COLUMN#,
			 INIT_TIME=#INIT_TIME#,
			 STOP_TIME=#STOP_TIME#,
			 UPDATE_TIME=#UPDATE_TIME#
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="TOPIC_CODE">
			  TOPIC_CODE=#TOPIC_CODE#
			</isNotEmpty>
		</dynamic>
	</update>
	<!-- 根据查询条件查询数据类型列表 -->
	<select id="getList" parameterClass="map" resultClass="hashmap">
		SELECT TOPIC_CODE, TOPIC_NAME, CLISTER_NAME, BROKER_ADDR, WRITE_QUEUE_NUMS, READ_QUEUE_NUMS, PERM, 
			TAGS, KEY_COLUMN, IS_INIT, INIT_TIME, STOP_TIME, UPDATE_TIME FROM DATA_TYPE
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="TOPIC_CODE">
				TOPIC_CODE = #TOPIC_CODE#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="TOPIC_NAME">
				topic_name like '%$TOPIC_NAME$%'
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="BROKER_ADDR">
				broker_addr=#BROKER_ADDR#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="WRITE_QUEUE_NUMS">
				write_queue_nums=#WRITE_QUEUE_NUMS#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="READ_QUEUE_NUMS">
				read_queue_nums=#READ_QUEUE_NUMS#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="PERM">
				perm=#PERM#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="TAGS">
				tags=#TAGS#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="KEY_COLUMN">
				key_column=#KEY_COLUMN#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="IS_INIT">
				is_init=#IS_INIT#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="INIT_TIME">
				init_time=#INIT_TIME#
			</isNotEmpty>
			<isNotEmpty prepend="stop_time" property="STOP_TIME">
				stop_time=#STOP_TIME#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="UPDATE_TIME">
				update_time=#UPDATE_TIME#
			</isNotEmpty>
		</dynamic>
		<isNotEmpty prepend="order by " property="_ORDER">
	        $_ORDER$
	    </isNotEmpty> 
		 <isNotEmpty prepend="limit " property="_limit">
	         #_limit._pstart#,#_limit._psize#
	    </isNotEmpty> 
	</select>
	<select id="getCount" parameterClass="map" resultClass="hashmap">
		select COUNT(*) COUNT from DATA_TYPE
		<dynamic prepend="WHERE">
			<isNotEmpty prepend="AND" property="TOPIC_CODE">
				TOPIC_CODE like '%$TOPIC_CODE$%'
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="TOPIC_NAME">
				topic_name like '%$TOPIC_NAME$%'
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="BROKER_ADDR">
				broker_addr=#BROKER_ADDR#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="WRITE_QUEUE_NUMS">
				write_queue_nums=#WRITE_QUEUE_NUMS#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="READ_QUEUE_NUMS">
				read_queue_nums=#READ_QUEUE_NUMS#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="PERM">
				perm=#PERM#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="TAGS">
				tags=#TAGS#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="KEY_COLUMN">
				key_column=#KEY_COLUMN#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="IS_INIT">
				is_init=#IS_INIT#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="INIT_TIME">
				init_time=#init_time#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="STOP_TIME">
				stop_time=#STOP_TIME#
			</isNotEmpty>
			<isNotEmpty prepend="AND" property="UPDATE_TIME">
				update_time=#UPDATE_TIME#
			</isNotEmpty>
		</dynamic>
		<isNotEmpty prepend="order by " property="_ORDER">
	        $_ORDER$
	    </isNotEmpty>
	</select>
</sqlMap>